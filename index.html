<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Payroll Management System</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background-image: linear-gradient(rgba(10, 10, 20, 0.8), rgba(5, 5, 10, 0.9)), url('https://images.unsplash.com/photo-1521737604893-d14cc237f11d?q=80&w=2070&auto=format&fit=crop');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
    }
    body::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      backdrop-filter: blur(3px);
      z-index: -1;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
    }

    .header {
      text-align: center;
      margin-bottom: 4rem;
      padding-top: 2rem;
    }

    .title {
      font-size: 3.5rem;
      font-weight: 700;
      color: white;
      margin-bottom: 0.5rem;
      opacity: 0;
      animation: fadeInUp 1s ease-out 0.5s forwards;
      text-shadow: 0 4px 8px rgba(0,0,0,0.3);
      letter-spacing: -1px;
    }

    .subtitle {
      font-size: 1.2rem;
      color: rgba(255,255,255,0.9);
      opacity: 0;
      animation: fadeInUp 1s ease-out 0.8s forwards;
      font-weight: 400;
    }

    .modules-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      margin-top: 3rem;
      perspective: 1000px;
    }

    .module-card {
      background: rgba(255,255,255,0.98);
      border-radius: 20px;
      padding: 2rem;
      cursor: pointer;
      text-align: center;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      position: relative;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.2);
      opacity: 0;
      transform: translateY(30px);
      animation: fadeInUp 0.8s ease-out forwards;
      transform-style: preserve-3d;
    }

    .module-card:nth-child(1) { animation-delay: 1.1s; }
    .module-card:nth-child(2) { animation-delay: 1.3s; }
    .module-card:nth-child(3) { animation-delay: 1.5s; }
    .module-card:nth-child(4) { animation-delay: 1.7s; }
    .module-card:nth-child(5) { animation-delay: 1.9s; }
    .module-card:nth-child(6) { animation-delay: 2.1s; }
    .module-card:nth-child(7) { animation-delay: 2.3s; }

    .module-card:hover {
      transform: translateY(-8px) translateZ(20px);
      box-shadow: 0 20px 40px rgba(0,0,0,0.3);
    }

    .module-icon {
      width: 60px;
      height: 60px;
      margin: 0 auto 1.5rem auto;
      color: #667eea;
      margin-bottom: 1rem;
    }

    .module-title {
      font-size: 1.5rem;
      font-weight: 600;
      color: #2c3e50;
      margin-bottom: 0.5rem;
    }

    .module-description {
      color: #7f8c8d;
      font-size: 0.95rem;
      line-height: 1.6;
      margin-bottom: 1.5rem;
    }

    .module-actions {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.5s ease-out, margin-top 0.5s ease-out;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      margin-top: 0; /* Will be animated */
    }

    .action-btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 25px;
      font-size: 0.85rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-block;
    }

    .module-card.expanded .module-actions {
      max-height: 250px; /* Adjust as needed */
      margin-top: 1.5rem;
    }

    .action-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }

    .action-btn.secondary {
      background: #f0f2f5;
      color: #667eea;
      border: 1px solid #e1e8ed;
    }

    .action-btn.secondary:hover {
      background: rgba(102, 126, 234, 0.2);
    }

    .action-btn.danger {
      background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
      box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
    }

    .form-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .form-modal {
      background: white;
      border-radius: 15px;
      padding: 2rem;
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }

    .form-group {
      margin-bottom: 1rem;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: #34495e;
    }

    .form-group input,
    .form-group select {
      width: 100%;
      padding: 0.75rem;
      border: 2px solid #e1e8ed;
      border-radius: 8px;
      font-size: 1rem;
    }

    .form-group input:focus,
    .form-group select:focus {
      outline: none;
      border-color: #667eea;
    }

    .form-buttons {
      display: flex;
      gap: 1rem;
      margin-top: 1.5rem;
    }

    .form-btn {
      flex: 1;
      padding: 0.75rem;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .form-btn.primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    .form-btn.secondary {
      background: #6c757d;
      color: white;
    }

    .close-btn {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: #7f8c8d;
    }

    /* Ripple Effect */
    .ripple {
      position: absolute;
      border-radius: 50%;
      background: rgba(102, 126, 234, 0.3);
      transform: scale(0);
      animation: ripple-animation 0.6s linear;
      pointer-events: none;
    }

    /* Notification Modal Styles */
    .notification-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.4);
      display: none;
      align-items: flex-start;
      justify-content: center;
      z-index: 3000;
      padding-top: 5vh;
      backdrop-filter: blur(5px);
    }

    .notification-modal {
      background: white;
      border-radius: 15px;
      padding: 1.5rem 2rem;
      max-width: 450px;
      width: 90%;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      display: flex;
      align-items: center;
      gap: 1rem;
      transform: translateY(-50px);
      opacity: 0;
      transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    }

    .notification-overlay.show .notification-modal {
      transform: translateY(0);
      opacity: 1;
    }

    .notification-icon {
      font-size: 2rem;
    }
    .notification-icon.success { color: #28a745; }
    .notification-icon.error { color: #e74c3c; }

    .notification-title {
      font-weight: 600;
      color: #2c3e50;
    }

    .notification-text {
      color: #7f8c8d;
      font-size: 0.9rem;
    }

    @keyframes ripple-animation {
      to {
        transform: scale(4);
        opacity: 0;
      }
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Floating particles background */
    .particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
    }

    .particle {
      position: absolute;
      background: rgba(255,255,255,0.1);
      border-radius: 50%;
      animation: float 6s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(180deg); }
    }

    /* Responsive */
    @media (max-width: 768px) {
      .title {
        font-size: 2.5rem;
      }
      .modules-grid {
        grid-template-columns: 1fr;
        gap: 1.5rem;
      }
      
      .module-card {
        padding: 1.5rem;
      }
    }
  </style>
</head>
<body>
  <div class="particles" id="particles"></div>
  
  <div class="container">
    <div class="header">
      <h1 class="title">Payroll Management System</h1>
      <p class="subtitle">Streamline your organization's payroll processes with our comprehensive management suite</p>
    </div>

    <div class="modules-grid">
      <!-- Admin Dashboard Card -->
      <div class="module-card" onclick="toggleCard(this); createRipple(event);">
        <div class="module-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"/></svg></div>
        <h3 class="module-title">Admin Dashboard</h3>
        <p class="module-description">Oversee the entire system, manage core settings, and view analytics.</p>

        <div class="module-actions">
          <button class="action-btn" onclick="navigateTo('admin-dashboard.html'); event.stopPropagation();">üöÄ Launch Dashboard</button>
          <button class="action-btn secondary" onclick="navigateTo('user-report.html'); event.stopPropagation();">üìä User Reports</button>
          <button class="action-btn secondary" onclick="navigateTo('department-report.html'); event.stopPropagation();">üìà Department Reports</button>
        </div>
      </div>

      <!-- Department Management Card -->
      <div class="module-card" onclick="toggleCard(this); createRipple(event);">
        <div class="module-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5z"/></svg></div>
        <h3 class="module-title">Department Management</h3>
        <p class="module-description">Organize and manage departments, hierarchies, and organizational structure efficiently.</p>

        <div class="module-actions">
          <button class="action-btn" onclick="openForm('department'); event.stopPropagation();">‚ûï Add Department</button>
          <button class="action-btn secondary" onclick="navigateTo('department-management.html'); event.stopPropagation();">‚úèÔ∏è Update Department</button>
          <button class="action-btn danger" onclick="navigateTo('department-management.html'); event.stopPropagation();">üóëÔ∏è Delete Department</button>
          <button class="action-btn secondary" onclick="navigateTo('department-report.html'); event.stopPropagation();">üìä View Report</button>
        </div>
      </div>

      <!-- Salary Management Card -->
      <div class="module-card" onclick="toggleCard(this); createRipple(event);">
        <div class="module-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c2.16-.43 3.5-1.6 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/></svg></div>
        <h3 class="module-title">Salary Management</h3>
        <p class="module-description">Handle payroll calculations, salary structures, and compensation management.</p>

        <div class="module-actions">
          <button class="action-btn" onclick="openForm('salary'); event.stopPropagation();">‚ûï Add Employee Salary</button>
          <button class="action-btn secondary" onclick="navigateTo('salary-management.html'); event.stopPropagation();">‚úèÔ∏è Update Salary</button>
          <button class="action-btn secondary" onclick="navigateTo('salary-report.html'); event.stopPropagation();">üìä View Report</button>
        </div>
      </div>

      <!-- System User Management Card -->
      <div class="module-card" onclick="toggleCard(this); createRipple(event);">
        <div class="module-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg></div>
        <h3 class="module-title">System User Management</h3>
        <p class="module-description">Manage user accounts, roles, permissions, and system access controls.</p>

        <div class="module-actions">
          <button class="action-btn" onclick="openForm('user'); event.stopPropagation();">‚ûï Add User</button>
          <button class="action-btn secondary" onclick="navigateTo('user-management.html'); event.stopPropagation();">‚úèÔ∏è Update User</button>
          <button class="action-btn danger" onclick="navigateTo('user-management.html'); event.stopPropagation();">üóëÔ∏è Delete User</button>
          <button class="action-btn secondary" onclick="navigateTo('user-report.html'); event.stopPropagation();">üìä View Report</button>
        </div>
      </div>

      

      <!-- Leave Management Card -->
      <div class="module-card" onclick="toggleCard(this); createRipple(event);">
        <div class="module-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"/></svg></div>
        <h3 class="module-title">Leave Management</h3>
        <p class="module-description">Track and manage employee leave requests, approvals, and balances.</p>

        <div class="module-actions">
          <button class="action-btn" onclick="openForm('leave'); event.stopPropagation();">üìù Apply for Leave</button>
          <button class="action-btn secondary" onclick="navigateTo('leave-management.html'); event.stopPropagation();">‚úÖ Approve Requests</button>
          <button class="action-btn secondary" onclick="navigateTo('leave-report.html'); event.stopPropagation();">üìä View Report</button>
        </div>
      </div>

      <!-- Employee Management Card -->
      <div class="module-card" onclick="toggleCard(this); createRipple(event);">
        <div class="module-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg></div>
        <h3 class="module-title">Employee Management</h3>
        <p class="module-description">Comprehensive employee records, profiles, and personal information management.</p>

        <div class="module-actions">
          <button class="action-btn" onclick="openForm('employee'); event.stopPropagation();">‚ûï Add Employee</button>
          <button class="action-btn secondary" onclick="navigateTo('employee-management.html'); event.stopPropagation();">‚úèÔ∏è Update Profile</button>
          <button class="action-btn danger" onclick="navigateTo('employee-management.html'); event.stopPropagation();">üóëÔ∏è Delete Employee</button>
          <button class="action-btn secondary" onclick="navigateTo('employee-report.html'); event.stopPropagation();">üìä View Report</button>
        </div>
      </div>

    </div>
  </div>

  <!-- Notification Modal -->
  <div class="notification-overlay" id="notificationOverlay">
    <div class="notification-modal">
      <div class="notification-icon" id="notificationIcon"></div>
      <div class="notification-content">
        <h3 class="notification-title" id="notificationTitle"></h3>
        <p class="notification-text" id="notificationText"></p>
      </div>
    </div>
  </div>


  <!-- Form Overlay -->
  <div class="form-overlay" id="formOverlay">
    <div class="form-modal">
      <button class="close-btn" onclick="closeForm()">&times;</button>
      <h2 id="formTitle">Add New Item</h2>
      <form id="dataForm">
        <div id="formFields"></div>
        <div class="form-buttons">
          <button type="button" class="form-btn primary" onclick="saveData()">Save</button>
          <button type="button" class="form-btn secondary" onclick="closeForm()">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    // Custom Notification Function
    function showNotification(type, title, message) {
      const overlay = document.getElementById('notificationOverlay');
      const icon = document.getElementById('notificationIcon');
      const titleEl = document.getElementById('notificationTitle');
      const textEl = document.getElementById('notificationText');

      if (type === 'success') {
        icon.innerHTML = '‚úÖ';
        icon.className = 'notification-icon success';
      } else {
        icon.innerHTML = '‚ùå';
        icon.className = 'notification-icon error';
      }

      titleEl.textContent = title;
      textEl.textContent = message;

      overlay.style.display = 'flex';
      setTimeout(() => overlay.classList.add('show'), 10);
      setTimeout(() => {
        overlay.classList.remove('show');
        setTimeout(() => overlay.style.display = 'none', 400);
      }, 3000); // Auto-hide after 3 seconds
    }
    // Create floating particles
    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      const particleCount = 50;

      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        particle.style.width = Math.random() * 4 + 2 + 'px';
        particle.style.height = particle.style.width;
        particle.style.animationDelay = Math.random() * 6 + 's';
        particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
        particlesContainer.appendChild(particle);
      }
    }

    // Ripple effect
    function createRipple(event) {
      const card = event.currentTarget;
      const ripple = document.createElement('span');
      const rect = card.getBoundingClientRect();
      const size = Math.max(rect.width, rect.height);
      const x = event.clientX - rect.left - size / 2;
      const y = event.clientY - rect.top - size / 2;

      ripple.style.width = ripple.style.height = size + 'px';
      ripple.style.left = x + 'px';
      ripple.style.top = y + 'px';
      ripple.classList.add('ripple');

      card.appendChild(ripple);

      setTimeout(() => {
        ripple.remove();
      }, 600);
    }

    // Card toggle function
    function toggleCard(cardElement) {
      // Prevent toggling when a button inside is clicked
      if (event.target.closest('.action-btn')) {
        // If it's a link, navigate. If it's a button for a form, the onclick will handle it.
        event.stopPropagation();
        return;
      }
      cardElement.classList.toggle('expanded');
    }

    // Navigation function (for buttons that still link to pages)
    function navigateTo(page) {
      setTimeout(() => {
        window.location.href = page;
      }, 200); // A slight delay for visual feedback like ripples
    }

    // Initialize particles
    createParticles();

    // Data storage
    let systemData = {
      departments: [],
      employees: [],
      users: [],
      leaves: []
    };

    // Load data from localStorage if available
    function loadData() {
      const savedData = localStorage.getItem('payrollSystemData');
      if (savedData) {
        systemData = JSON.parse(savedData);
      }
    }

    // Save data to localStorage
    function saveDataToStorage() {
      localStorage.setItem('payrollSystemData', JSON.stringify(systemData));
    }

    // Form management
    let currentFormType = '';

    function openForm(type) {
      currentFormType = type;
      const overlay = document.getElementById('formOverlay');
      const title = document.getElementById('formTitle');
      const fields = document.getElementById('formFields');

      overlay.style.display = 'flex';

      switch(type) {
        case 'department':
          title.textContent = 'Add New Department';
          fields.innerHTML = `
            <div class="form-group">
              <label for="deptName">Department Name:</label>
              <input type="text" id="deptName" required>
            </div>
            <div class="form-group">
              <label for="deptCode">Department Code:</label>
              <input type="text" id="deptCode" required>
            </div>
            <div class="form-group">
              <label for="deptHead">Department Head:</label>
              <input type="text" id="deptHead" required>
            </div>
          `;
          break;

        case 'salary':
          title.textContent = 'Add New Employee Salary';
          fields.innerHTML = `
            <div class="form-group">
              <label for="empId">Employee ID:</label>
              <input type="text" id="empId" required>
            </div>
            <div class="form-group">
              <label for="empName">Employee Name:</label>
              <input type="text" id="empName" required>
            </div>
            <div class="form-group">
              <label for="empDept">Department:</label>
              <select id="empDept" required>
                <option value="">Select Department</option>
                ${systemData.departments.map(dept => `<option value="${dept.name}">${dept.name}</option>`).join('')}
              </select>
            </div>
            <div class="form-group">
              <label for="basicPay">Basic Pay:</label>
              <input type="number" id="basicPay" required>
            </div>
            <div class="form-group">
              <label for="allowance">Allowance:</label>
              <input type="number" id="allowance" required>
            </div>
            <div class="form-group">
              <label for="deduction">Deduction:</label>
              <input type="number" id="deduction" required>
            </div>
          `;
          break;

        case 'user':
          title.textContent = 'Add New User';
          fields.innerHTML = `
            <div class="form-group">
              <label for="username">Username:</label>
              <input type="text" id="username" required>
            </div>
            <div class="form-group">
              <label for="email">Email:</label>
              <input type="email" id="email" required>
            </div>
            <div class="form-group">
              <label for="role">Role:</label>
              <select id="role" required>
                <option value="Admin">Admin</option>
                <option value="HR Manager">HR Manager</option>
                <option value="Department Head">Department Head</option>
                <option value="Employee">Employee</option>
              </select>
            </div>
            <div class="form-group">
              <label for="userDept">Department:</label>
              <select id="userDept" required>
                <option value="">Select Department</option>
                ${systemData.departments.map(dept => `<option value="${dept.name}">${dept.name}</option>`).join('')}
              </select>
            </div>
          `;
          break;

        case 'leave':
          title.textContent = 'Add Leave Request';
          fields.innerHTML = `
            <div class="form-group">
              <label for="leaveEmployee">Employee:</label>
              <select id="leaveEmployee" required>
                <option value="">Select Employee</option>
                ${systemData.employees.map(emp => `<option value="${emp.name}">${emp.name}</option>`).join('')}
              </select>
            </div>
            <div class="form-group">
              <label for="leaveType">Leave Type:</label>
              <select id="leaveType" required>
                <option value="Sick Leave">Sick Leave</option>
                <option value="Annual Leave">Annual Leave</option>
                <option value="Personal Leave">Personal Leave</option>
                <option value="Maternity Leave">Maternity Leave</option>
                <option value="Emergency Leave">Emergency Leave</option>
              </select>
            </div>
            <div class="form-group">
              <label for="startDate">Start Date:</label>
              <input type="date" id="startDate" required>
            </div>
            <div class="form-group">
              <label for="endDate">End Date:</label>
              <input type="date" id="endDate" required>
            </div>
          `;
          break;

        case 'employee':
          title.textContent = 'Add New Employee';
          fields.innerHTML = `
            <div class="form-group">
              <label for="empId2">Employee ID:</label>
              <input type="text" id="empId2" required>
            </div>
            <div class="form-group">
              <label for="empName2">Full Name:</label>
              <input type="text" id="empName2" required>
            </div>
            <div class="form-group">
              <label for="empEmail">Email:</label>
              <input type="email" id="empEmail" required>
            </div>
            <div class="form-group">
              <label for="empPhone">Phone:</label>
              <input type="tel" id="empPhone" required>
            </div>
            <div class="form-group">
              <label for="empDept2">Department:</label>
              <select id="empDept2" required>
                <option value="">Select Department</option>
                ${systemData.departments.map(dept => `<option value="${dept.name}">${dept.name}</option>`).join('')}
              </select>
            </div>
            <div class="form-group">
              <label for="empPosition">Position:</label>
              <input type="text" id="empPosition" required>
            </div>
          `;
          break;
      }
    }

    function closeForm() {
      document.getElementById('formOverlay').style.display = 'none';
      document.getElementById('dataForm').reset();
    }

    function saveData() {
      switch(currentFormType) {
        case 'department':
          const deptName = document.getElementById('deptName').value;
          const deptCode = document.getElementById('deptCode').value;
          const deptHead = document.getElementById('deptHead').value;
          
          if (deptName && deptCode && deptHead) {
            const newDept = {
              id: systemData.departments.length + 1,
              name: deptName,
              code: deptCode,
              head: deptHead,
              employees: 0
            };
            systemData.departments.push(newDept);
            saveDataToStorage();
            closeForm();
            showNotification('success', 'Success!', 'Department added successfully.');
          } else {
            showNotification('error', 'Error', 'Please fill all fields.');
          }
          break;

        case 'salary':
          const empId = document.getElementById('empId').value;
          const empName = document.getElementById('empName').value;
          const empDept = document.getElementById('empDept').value;
          const basicPay = parseInt(document.getElementById('basicPay').value);
          const allowance = parseInt(document.getElementById('allowance').value);
          const deduction = parseInt(document.getElementById('deduction').value);
          
          if (empId && empName && empDept && !isNaN(basicPay) && !isNaN(allowance) && !isNaN(deduction)) {
            const netSalary = basicPay + allowance - deduction;
            const newEmployee = {
              id: empId,
              name: empName,
              department: empDept,
              basicPay: basicPay,
              allowance: allowance,
              deduction: deduction,
              netSalary: netSalary
            };
            systemData.employees.push(newEmployee);
            
            const dept = systemData.departments.find(d => d.name === empDept);
            if (dept) dept.employees++;

            saveDataToStorage();
            closeForm();
            showNotification('success', 'Success!', 'Employee salary added successfully.');
          } else {
            showNotification('error', 'Error', 'Please fill all fields correctly.');
          }
          break;

        case 'user':
          const username = document.getElementById('username').value;
          const email = document.getElementById('email').value;
          const role = document.getElementById('role').value;
          const userDept = document.getElementById('userDept').value;
          
          if (username && email && role && userDept) {
            const newUser = {
              id: systemData.users.length + 1,
              username: username,
              email: email,
              role: role,
              department: userDept,
              status: 'Active'
            };
            systemData.users.push(newUser);
            saveDataToStorage();
            closeForm();
            showNotification('success', 'Success!', 'User added successfully.');
          } else {
            showNotification('error', 'Error', 'Please fill all fields.');
          }
          break;

        case 'leave':
          const leaveEmployee = document.getElementById('leaveEmployee').value;
          const leaveType = document.getElementById('leaveType').value;
          const startDate = document.getElementById('startDate').value;
          const endDate = document.getElementById('endDate').value;
          
          if (leaveEmployee && leaveType && startDate && endDate) {
            const newLeave = {
              id: systemData.leaves.length + 1,
              employee: leaveEmployee,
              type: leaveType,
              startDate: startDate,
              endDate: endDate,
              status: 'Pending'
            };
            systemData.leaves.push(newLeave);
            saveDataToStorage();
            closeForm();
            showNotification('success', 'Success!', 'Leave request added successfully.');
          } else {
            showNotification('error', 'Error', 'Please fill all fields.');
          }
          break;

        case 'employee':
          const empId2 = document.getElementById('empId2').value;
          const empName2 = document.getElementById('empName2').value;
          const empEmail = document.getElementById('empEmail').value;
          const empPhone = document.getElementById('empPhone').value;
          const empDept2 = document.getElementById('empDept2').value;
          const empPosition = document.getElementById('empPosition').value;
          
          if (empId2 && empName2 && empEmail && empPhone && empDept2 && empPosition) {
            const existingEmployee = systemData.employees.find(emp => emp.id === empId2);
            if (existingEmployee) {
              existingEmployee.name = empName2;
              existingEmployee.department = empDept2;
              existingEmployee.email = empEmail;
              existingEmployee.phone = empPhone;
              existingEmployee.position = empPosition;
            } else {
              const newEmployee = {
                id: empId2,
                name: empName2,
                department: empDept2,
                email: empEmail,
                phone: empPhone,
                position: empPosition,
                basicPay: 0,
                allowance: 0,
                deduction: 0,
                netSalary: 0
              };
              systemData.employees.push(newEmployee);
            }
            
            saveDataToStorage();
            closeForm();
            showNotification('success', 'Success!', 'Employee record added/updated successfully.');
          } else {
            showNotification('error', 'Error', 'Please fill all fields.');
          }
          break;
      }
    }

    // Initialize data on page load
    document.addEventListener('DOMContentLoaded', () => {
      loadData();
      createParticles();
    });
  </script>
</body>
</html>